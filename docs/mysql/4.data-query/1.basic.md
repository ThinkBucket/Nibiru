---
title: Basic Query
---

In this section, you will learn below keywords of MySQL:

- SELECT...FROM
- DISTINCT
- LIMIT
- AS
- ORDER BY
- ASC
- DESC

Example: _user_profile_

| id  | device_id | gender | age | university          | gpa |
| --- | --------- | ------ | --- | ------------------- | --- |
| 1   | 2138      | male   | 21  | Peking University   | 3.4 |
| 2   | 3214      | male   |     | Fudan University    | 4.0 |
| 3   | 6543      | female | 20  | Peking University   | 3.2 |
| 4   | 2315      | female | 23  | Zhejiang University | 3.6 |
| 5   | 5432      | male   | 25  | Shandong University | 3.8 |

## 基础查询

SQL 语句是由简单的英语单词构成的。这些单词称为关键字，每个 SQL 语句都是由一个或多个关键字构成。其中最经常使用的 SQL 语句就是 SELECT 语句了，它的用途是从一个或多个表中查询信息。

### 查询单列

我们将从简单的 SQL SELECT 语句讲起，此语句如下所示：

```sql
SELECT device_id FROM user_profile
```

上述语句利用 SELECT 语句从 user_profile 表中查询名为 device_id 的列。查询所需的列名写在 SELECT 关键字之后，FROM 关键字指出从哪个表中查询数据。

| device_id |
| --------- |
| 2138      |
| 3214      |
| 6543      |
| 2315      |
| 5432      |

### 查询多个列

要想从一个表中查询多个列，仍然使用相同的 SELECT 语句。唯一的不同是必须在 SELECT 关键字后给出多个列名，列名之间必须以逗号分隔。

```sql
SELECT device_id, gender FROM user_profile
```

| device_id | gender |
| --------- | ------ |
| 2138      | male   |
| 3214      | male   |
| 6543      | female |
| 2315      | female |
| 5432      | male   |

### 查询所有列

除了指定所需的列外（如上所述，一个或多个列），SELECT 语句还可以查询所有的列而不必逐个列出它们。在实际列名的位置使用星号（\*）通配符可以做到这点，如下所示:

```sql
SELECT * FROM user_profile
```

## 简单处理查询结果

### 查询结果去重

SELECT 语句都是返回所有匹配的行。但是如果你希望每个不同的值仅出现一次，应该怎么办呢？这时候需要用到 DISTINCT 关键字加在去重字段前。

如下所示代码，含义为返回去重的年龄数据

```sql
SELECT DISTINCT age FROM user_profile
```

### 查询结果限制返回行数

在默认情况下，SELECT 语句会返回指定表中所有匹配的行，但有时我们并不想结果返回所有的行，这种情况下可以通过 LIMIT 语句限制返回结果行数。LIMIT 语句一般加在 SQL 语句末尾，并且与数字搭配，写作 `LIMIT N`，N 代表想要限制返回的行数。

在下述代码中，是一个限制了返回 5 行数据的例子。

```sql
SELECT device_id FROM user_profile LIMIT 5
```

### 查询后的列重命名

在默认情况下，查询结果返回的列名会原始表中的列名一致，在有些场景中我们会想赋予列不同的名字以展示更多的信息，SQL 也提供了列重命名的语法--'AS' 。在下面的例子中可以看到 SELECT 查询列后使用了 as 函数，将 device_id 赋予了一个新的列名 ‘active_user'

```sql
SELECT device_id AS active_user FROM user_profile
```

## 基础排序

### 单列排序

使用 SQL 语句返回某个数据库表的单个列或多个列。但输出并没有特定的顺序。 如果不排序，数据一般将以它在底层表中出现的顺序显示。 为了明确地排序用 SELECT 语句检索出的数据，可使用 ORDER BY 子句。 ORDER BY 子句取一个或多个列的名字，据此对输出进行排序。请看下面的例子：

```sql
SELECT age
FROM user_profile
ORDER BY age
```

可以看到结果按照 age 进行了升序排序:

| age  |
| ---- |
| NULL |
| 20   |
| 21   |
| 23   |
| 25   |

### 多列排序

有时候我们经常需要按不止一个列进行数据排序， 要按多个列排序，简单指定列名，列名之间用逗号分开即可，在排序时会按照列给出的先后顺序依次排序。

```sql
SELECT device_id, age, gpa
FROM user_profile
ORDER BY age, gpa
```

可以看到结果首先按照 age 进行了升序排序，再按照 gpa 进行升序 排序，注意的是 age 排序的优先级要大于 gpa，也就是说在 age 出 现相同值的时候才会用到 gpa 再次进行排序，如果 age 都是不同的值，那 gpa 排序将不会产生作用。

| device_id | age  | gpa |
| --------- | ---- | --- |
| 3214      | NULL | 4   |
| 6543      | 20   | 3.2 |
| 2138      | 21   | 3.4 |
| 2315      | 23   | 3.6 |
| 5432      | 25   | 3.8 |

### 升序降序

在默认情况下，ORDER BY 会对数据进行升序排序（从 A 到 Z），我们还可以使用 ORDER BY 子句进行降序（从 Z 到 A）排 序。为了进行降序排序， 必须指定 DESC 关键字。还是来看一个例子。

```sql
SELECT age
FROM user_profile
ORDER BY age DESC
```

同样的查询语句在 order by 最后加上 desc 后可以看到结果按照 age 进行了降序排序 。

| age  |
| ---- |
| 25   |
| 23   |
| 21   |
| 20   |
| NULL |

:::tip

那如果是多列排序的降序呢？

需要注意的一点是，DESC 关键字只应用到直接位于其前面的列名。也就是说如果我们 SQL 语句写的是 Order By age desc,gpa，那么排序将首先按照 age 降序排序序，再按照 gpa 升序排序输出。

:::

## Reference

1. [Understanding MySQL Storage Engines by mysqltutorial](https://www.mysqltutorial.org/understand-mysql-table-types-innodb-myisam.aspx)
